<!DOCTYPE html>
<html>

<head>
    <title>Login Form</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        type="text/css" />

    <!-- <link rel="stylesheet" href="base.css"> -->
</head>

<body>
  <form id="login" method="get" action="login.php">
    <div class="container" style = "width: 400px; float:left; height:250px; margin:10px">
      <h1>Login Page</h1><br>
      <label><b>User Name</b></label>
      <input type="text" name="Uname" id="Uname" placeholder="Username">
      <br><br>
      <label><b>Password</b></label>
      <input type="Password" name="Pass" id="Pass" placeholder="Password">
      <br><br>
      <input type="button" name="log" id="log" value="Log In Here">
      <br><br>
    </div>
  </form>

  <form action="action_page.php" >
  <div class="container" style = "width: 400px; float:left; height:250px; margin:10px">
    <h1>Sign Up</h1><br>
    <label for="username"><b>Username</b></label>
    <input type="text" placeholder="Enter Username" name="username" required>
    <br><br>
    <label for="psw"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" name="psw" required>
    <br><br>
    <label for="psw-repeat"><b>Repeat Password</b></label>
    <input type="password" placeholder="Repeat Password" name="psw-repeat" required>
    <br><br>
    <input type="submit" name="signupbtn" value="Sign Up">

    </div>
  </form>
</body>

<script>
    window.onload = () => {
        document.getElementById('log').addEventListener('click', () => {
		const username = document.getElementById('Uname').value;
		const password = document.getElementById('Pass').value;
		let payload =  {
                    username: username,
                    password: password
                }

            fetch('/login', {
		    method: 'POST',
		    headers: {
			    'Content-Type': 'application/json'
		    },
		    body: JSON.stringify(payload)
            }).then(response => {
		    response.json().then(json => {
			    if (json.success === "true") {
				    window.location.href = 'http://cloudywithachanceofmeatballs422.com/';
			    } else {
				    alert("Login failed");
			    }
		    });
            }).catch(() => alert('rejected'));
        });
    }
</script>

</html>
</body>

</html>
